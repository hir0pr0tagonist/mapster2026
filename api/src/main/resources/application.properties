spring.datasource.url=jdbc:postgresql://postgis:5432/mapster
spring.datasource.username=mapster
spring.datasource.password=mapsterpass
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.spatial.dialect.postgis.PostgisDialect
spring.datasource.initialization-mode=never

spring.application.name=mapster-api

# Serve the application under a stable /api prefix (used by the ingress).
server.servlet.context-path=/api

# Respect X-Forwarded-* headers (ingress / load balancers).
server.forward-headers-strategy=framework

# Compress large JSON responses (GeoJSON overlays can be multi-MB).
server.compression.enabled=true
server.compression.mime-types=application/json,application/geo+json,application/x-protobuf,application/vnd.mapbox-vector-tile,text/html,text/plain,text/css,application/javascript
server.compression.min-response-size=1024

# Actuator / health probes / metrics
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoints.web.discovery.enabled=false

# Enable liveness/readiness endpoints regardless of env.
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-details=never

# Prometheus common tags
management.metrics.tags.application=${spring.application.name}

# Tracing (OpenTelemetry via Micrometer Tracing)
# Keep this effectively off by default unless explicitly enabled.
management.tracing.enabled=${TRACING_ENABLED:false}
management.tracing.sampling.probability=${TRACING_SAMPLING_PROBABILITY:0.0}
management.otlp.tracing.endpoint=${OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:${OTEL_EXPORTER_OTLP_ENDPOINT:}}

# Logging
logging.level.org.springframework=DEBUG
logging.level.com.mapster.api=DEBUG
